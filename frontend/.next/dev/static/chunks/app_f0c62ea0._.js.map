{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdityaKhachar/Downloads/Backend-Assessment/weather-explorer-case-study/frontend/app/components/InputPanel.tsx"],"sourcesContent":["// frontend/app/components/InputPanel.tsx (FINAL FIX FOR 404 ERROR)\r\n\r\n\"use client\";\r\nimport React, { useState, FormEvent } from 'react';\r\n\r\nconst API_BASE_URL = 'https://inrisk-weather-explorer.onrender.com'; \r\n\r\ninterface InputPanelProps {\r\n    onFileStored: () => void;\r\n}\r\n\r\ninterface FormData {\r\n    latitude: number;\r\n    longitude: number;\r\n    start_date: string;\r\n    end_date: string;\r\n}\r\n\r\nfunction InputPanel({ onFileStored }: InputPanelProps) {\r\n    const [formData, setFormData] = useState<FormData>({\r\n        latitude: 35.68,\r\n        longitude: 139.75,\r\n        start_date: '2024-01-01',\r\n        end_date: '2024-01-05',\r\n    });\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [successFile, setSuccessFile] = useState<string | null>(null);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value, type } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'number' ? parseFloat(value) : value,\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n        setSuccessFile(null);\r\n\r\n        try {\r\n            // CRITICAL FIX: Changed endpoint to match backend's defined route: /store-weather-data\r\n            const response = await fetch(`${API_BASE_URL}/store-weather-data`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(formData),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                const errorDetail = data.detail ? (typeof data.detail === 'string' ? data.detail : JSON.stringify(data.detail)) : \"Unknown Error\";\r\n                setError(`Error (${response.status}): ${errorDetail}`);\r\n            } else {\r\n                setSuccessFile(data.file);\r\n                onFileStored(); // Signal parent to refresh FileBrowser\r\n            }\r\n        } catch (err: any) {\r\n            setError(`Network error: ${err.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 bg-white rounded-lg shadow-xl border border-gray-200\">\r\n            <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Fetch & Store Data</h2>\r\n            <form onSubmit={handleSubmit} className=\"grid grid-cols-2 gap-4\">\r\n                {Object.keys(formData).map(key => (\r\n                    <input\r\n                        key={key}\r\n                        type={key.includes('date') ? 'date' : 'number'}\r\n                        name={key}\r\n                        value={formData[key as keyof FormData] as any}\r\n                        onChange={handleChange}\r\n                        placeholder={key.split('_').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ')}\r\n                        \r\n                        // Responsive Fixes: Guaranteed dark text for mobile readability\r\n                        className=\"p-2 border border-gray-300 rounded \r\n                                   text-gray-900 \r\n                                   bg-white\r\n                                   placeholder-gray-500 \r\n                                   focus:ring-blue-500 \r\n                                   appearance-none\" \r\n                        \r\n                        required\r\n                        step={key.includes('date') ? undefined : 'any'}\r\n                    />\r\n                ))}\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className={`col-span-2 p-3 rounded text-white font-bold transition duration-150 shadow-md ${\r\n                        loading ? 'bg-gray-500 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'\r\n                    }`}\r\n                >\r\n                    {loading ? 'Fetching & Storing...' : 'Fetch & Store Data'}\r\n                </button>\r\n            </form>\r\n\r\n            {error && (\r\n                <p className=\"mt-4 p-2 bg-red-100 text-red-700 rounded border border-red-300\">\r\n                    Error: {error}\r\n                </p>\r\n            )}\r\n            {successFile && (\r\n                <p className=\"mt-4 p-2 bg-green-100 text-green-700 rounded border border-green-300\">\r\n                    Success! File stored: **{successFile}**\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InputPanel;"],"names":[],"mappings":"AAAA,mEAAmE;;;;;;AAGnE;;;AADA;;AAGA,MAAM,eAAe;AAarB,SAAS,WAAW,EAAE,YAAY,EAAmB;;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAW;QAC/C,UAAU;QACV,WAAW;QACX,YAAY;QACZ,UAAU;IACd;IACA,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAU;IAChD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IAE9D,MAAM,eAAe,CAAC;QAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,MAAM;QACtC,YAAY,CAAA,OAAQ,CAAC;gBACjB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE,SAAS,WAAW,WAAW,SAAS;YACpD,CAAC;IACL;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QACT,eAAe;QAEf,IAAI;YACA,uFAAuF;YACvF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,mBAAmB,CAAC,EAAE;gBAC/D,QAAQ;gBACR,SAAS;oBACL,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;YACzB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,MAAM,cAAc,KAAK,MAAM,GAAI,OAAO,KAAK,MAAM,KAAK,WAAW,KAAK,MAAM,GAAG,KAAK,SAAS,CAAC,KAAK,MAAM,IAAK;gBAClH,SAAS,CAAC,OAAO,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,aAAa;YACzD,OAAO;gBACH,eAAe,KAAK,IAAI;gBACxB,gBAAgB,uCAAuC;YAC3D;QACJ,EAAE,OAAO,KAAU;YACf,SAAS,CAAC,eAAe,EAAE,IAAI,OAAO,EAAE;QAC5C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAAuC;;;;;;0BACrD,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;oBACnC,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,CAAA,oBACvB,6LAAC;4BAEG,MAAM,IAAI,QAAQ,CAAC,UAAU,SAAS;4BACtC,MAAM;4BACN,OAAO,QAAQ,CAAC,IAAsB;4BACtC,UAAU;4BACV,aAAa,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC;4BAElF,gEAAgE;4BAChE,WAAU;4BAOV,QAAQ;4BACR,MAAM,IAAI,QAAQ,CAAC,UAAU,YAAY;2BAhBpC;;;;;kCAoBb,6LAAC;wBACG,MAAK;wBACL,UAAU;wBACV,WAAW,CAAC,8EAA8E,EACtF,UAAU,mCAAmC,iCAC/C;kCAED,UAAU,0BAA0B;;;;;;;;;;;;YAI5C,uBACG,6LAAC;gBAAE,WAAU;;oBAAiE;oBAClE;;;;;;;YAGf,6BACG,6LAAC;gBAAE,WAAU;;oBAAuE;oBACvD;oBAAY;;;;;;;;;;;;;AAKzD;GApGS;KAAA;uCAsGM"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdityaKhachar/Downloads/Backend-Assessment/weather-explorer-case-study/frontend/app/components/FileBrowser.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FileMetadata } from '../page';\r\n\r\nconst API_BASE_URL = 'https://inrisk-weather-explorer.onrender.com'; \r\n\r\ninterface FileBrowserProps {\r\n    onFileSelect: (fileName: string) => void;\r\n    selectedFile: string | null;\r\n}\r\n\r\nfunction FileBrowser({ onFileSelect, selectedFile }: FileBrowserProps) {\r\n    const [files, setFiles] = useState<FileMetadata[]>([]);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchFiles = async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/list-weather-files`);\r\n            const data = await response.json();\r\n\r\n            // Note: The backend response body structure is '{\"files\": [...]}'\r\n            if (!response.ok) {\r\n                // If backend returns an error object, check if it has a 'detail' field\r\n                const errorDetail = data.detail ? (typeof data.detail === 'string' ? data.detail : JSON.stringify(data.detail)) : \"Unknown API Error\";\r\n                setError(`Cloud Storage Error: Failed to list files - ${errorDetail}`);\r\n                setFiles([]);\r\n            } else {\r\n                // Ensure data.files exists before setting state\r\n                setFiles(data.files || []);\r\n            }\r\n        } catch (err: any) {\r\n            setError(\"Network error connecting to backend.\");\r\n            setFiles([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // The useEffect hook should depend on refreshKey from the parent component (Home.tsx)\r\n    // However, since refreshKey is not passed here, we rely on the parent component's `key` prop on FileBrowser.\r\n    useEffect(() => {\r\n        fetchFiles();\r\n    }, []); \r\n\r\n    return (\r\n        // FIX 1: Reduced padding on mobile (p-4) vs. desktop (lg:p-6)\r\n        <div className=\"p-4 lg:p-6 bg-white rounded-lg shadow-xl border border-gray-200 h-full\">\r\n            <h2 className=\"text-lg lg:text-xl font-bold text-gray-800 mb-4 flex justify-between items-center\">\r\n                Stored Files (AWS S3)\r\n                {/* FIX 2: Reduced button size and padding on mobile */}\r\n                <button \r\n                    onClick={fetchFiles}\r\n                    className=\"text-blue-600 hover:text-blue-700 text-sm font-medium transition duration-150 p-1 rounded hover:bg-blue-50\"\r\n                    disabled={loading}\r\n                >\r\n                    {loading ? 'Refreshing...' : 'Refresh'}\r\n                </button>\r\n            </h2>\r\n\r\n            {error && <p className=\"text-red-600 text-sm mb-2 font-medium\">Error: {error}</p>}\r\n\r\n            {loading && files.length === 0 && <p className=\"text-gray-500 text-sm\">Loading files...</p>}\r\n            \r\n            {files.length === 0 && !loading && !error && <p className=\"text-gray-500 text-sm\">No stored files found.</p>}\r\n\r\n            {/* FIX 3: Ensures the list scrolls vertically */}\r\n            <ul className=\"space-y-2 max-h-[20rem] lg:max-h-96 overflow-y-auto\">\r\n                {files.map((file) => (\r\n                    <li\r\n                        key={file.name}\r\n                        onClick={() => onFileSelect(file.name)}\r\n                        // FIX 4: Reduced vertical padding on list item for mobile (p-2)\r\n                        className={`cursor-pointer p-2 lg:p-3 border rounded-lg text-sm transition duration-150 ${\r\n                            selectedFile === file.name \r\n                                ? 'bg-blue-100 border-blue-500 font-semibold'\r\n                                : 'bg-white hover:bg-gray-50 border-gray-200'\r\n                        }`}\r\n                    >\r\n                        {/* FIX 5: Ensure file name remains legible */}\r\n                        <p className=\"truncate text-gray-800\" title={file.name}>\r\n                            {file.name}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                            {new Date(file.created_at).toLocaleDateString()} | {(file.size / 1024).toFixed(1)} KB\r\n                        </p>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileBrowser;"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAIA,MAAM,eAAe;AAOrB,SAAS,YAAY,EAAE,YAAY,EAAE,YAAY,EAAoB;;IACjE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAiB,EAAE;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAU;IAChD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,aAAa;QACf,WAAW;QACX,SAAS;QACT,IAAI;YACA,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,mBAAmB,CAAC;YACjE,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,kEAAkE;YAClE,IAAI,CAAC,SAAS,EAAE,EAAE;gBACd,uEAAuE;gBACvE,MAAM,cAAc,KAAK,MAAM,GAAI,OAAO,KAAK,MAAM,KAAK,WAAW,KAAK,MAAM,GAAG,KAAK,SAAS,CAAC,KAAK,MAAM,IAAK;gBAClH,SAAS,CAAC,4CAA4C,EAAE,aAAa;gBACrE,SAAS,EAAE;YACf,OAAO;gBACH,gDAAgD;gBAChD,SAAS,KAAK,KAAK,IAAI,EAAE;YAC7B;QACJ,EAAE,OAAO,KAAU;YACf,SAAS;YACT,SAAS,EAAE;QACf,SAAU;YACN,WAAW;QACf;IACJ;IAEA,sFAAsF;IACtF,6GAA6G;IAC7G,IAAA,0KAAS;iCAAC;YACN;QACJ;gCAAG,EAAE;IAEL,OACI,8DAA8D;kBAC9D,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;;oBAAoF;kCAG9F,6LAAC;wBACG,SAAS;wBACT,WAAU;wBACV,UAAU;kCAET,UAAU,kBAAkB;;;;;;;;;;;;YAIpC,uBAAS,6LAAC;gBAAE,WAAU;;oBAAwC;oBAAQ;;;;;;;YAEtE,WAAW,MAAM,MAAM,KAAK,mBAAK,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;YAEtE,MAAM,MAAM,KAAK,KAAK,CAAC,WAAW,CAAC,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;0BAGlF,6LAAC;gBAAG,WAAU;0BACT,MAAM,GAAG,CAAC,CAAC,qBACR,6LAAC;wBAEG,SAAS,IAAM,aAAa,KAAK,IAAI;wBACrC,gEAAgE;wBAChE,WAAW,CAAC,4EAA4E,EACpF,iBAAiB,KAAK,IAAI,GACpB,8CACA,6CACR;;0CAGF,6LAAC;gCAAE,WAAU;gCAAyB,OAAO,KAAK,IAAI;0CACjD,KAAK,IAAI;;;;;;0CAEd,6LAAC;gCAAE,WAAU;;oCACR,IAAI,KAAK,KAAK,UAAU,EAAE,kBAAkB;oCAAG;oCAAI,CAAC,KAAK,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC;oCAAG;;;;;;;;uBAdjF,KAAK,IAAI;;;;;;;;;;;;;;;;AAqBtC;GAlFS;KAAA;uCAoFM"}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdityaKhachar/Downloads/Backend-Assessment/weather-explorer-case-study/frontend/app/components/VisualizationPanel.tsx"],"sourcesContent":["// frontend/app/components/VisualizationPanel.tsx (REVISED RENDER LOGIC)\r\n\"use client\";\r\nimport React, { useState, useEffect, Dispatch, SetStateAction } from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\r\nimport { RawWeatherData } from '../page';\r\n\r\nconst API_BASE_URL = 'https://inrisk-weather-explorer.onrender.com'; \r\n\r\n// --- Types ---\r\ninterface ChartData {\r\n    date: string;\r\n    tempMax: number;\r\n    tempMin: number;\r\n    apparentMax: number;\r\n    apparentMin: number;\r\n    unit: string;\r\n}\r\n\r\ninterface VisualizationPanelProps {\r\n    selectedFile: string | null;\r\n    weatherData: RawWeatherData | null;\r\n    setWeatherData: Dispatch<SetStateAction<RawWeatherData | null>>;\r\n}\r\n\r\n// Helper function to safely parse a value, converting null/undefined/NaN to 0\r\nconst safeParse = (value: number | null | undefined): number => {\r\n    return (value === null || value === undefined || isNaN(value)) ? 0 : value;\r\n};\r\n\r\n\r\nfunction VisualizationPanel({ selectedFile, weatherData, setWeatherData }: VisualizationPanelProps) {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [currentPage, setCurrentPage] = useState<number>(1);\r\n  const [rowsPerPage, setRowsPerPage] = useState<number>(10);\r\n  const [processedData, setProcessedData] = useState<ChartData[]>([]);\r\n  \r\n  // --- Data Processing and Fetching (Logic remains the same) ---\r\n\r\n  const processRawData = (data: RawWeatherData): ChartData[] => {\r\n    if (!data || !data.daily || !data.daily.time) {\r\n      return [];\r\n    }\r\n    const daily = data.daily;\r\n    const transformed: ChartData[] = daily.time.map((date, index) => ({\r\n      date,\r\n      tempMax: safeParse(daily.temperature_2m_max[index]),\r\n      tempMin: safeParse(daily.temperature_2m_min[index]),\r\n      apparentMax: safeParse(daily.apparent_temperature_max[index]),\r\n      apparentMin: safeParse(daily.apparent_temperature_min[index]),\r\n      unit: data.daily_units.temperature_2m_max,\r\n    }));\r\n    return transformed;\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    if (!selectedFile) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/weather-file-content/${selectedFile}`);\r\n      let rawData = await response.json(); \r\n\r\n      // CRITICAL BLOCK FOR DOUBLE PARSING SAFETY\r\n      try {\r\n          // If the first parse results in a string (due to double encoding), parse it again\r\n          if (typeof rawData === 'string') {\r\n              rawData = JSON.parse(rawData); \r\n          }\r\n      } catch (e) {\r\n          // If JSON.parse fails here, catch it and throw a controlled error\r\n          throw new Error(\"Data corruption error: Content could not be parsed into valid JSON.\");\r\n      }\r\n      // END CRITICAL BLOCK\r\n\r\n      if (!response.ok) {\r\n        const errorDetail = (rawData as any).detail?.message || JSON.stringify((rawData as any).detail) || \"Failed to retrieve file content.\";\r\n        setError(errorDetail);\r\n        setProcessedData([]);\r\n      } else {\r\n        const newProcessedData = processRawData(rawData);\r\n        setWeatherData(rawData); \r\n        setProcessedData(newProcessedData); \r\n      }\r\n    } catch (err: any) {\r\n        // This catches network errors AND the new Data corruption error\r\n        setError(`Processing Error: ${err.message}`);\r\n        setProcessedData([]);\r\n    } finally {\r\n        // GUARANTEE THIS LINE EXECUTES\r\n        setLoading(false); \r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    setCurrentPage(1);\r\n    setRowsPerPage(10);\r\n  }, [selectedFile]); \r\n\r\n  // --- Table Pagination Logic (Logic remains the same) ---\r\n\r\n  const totalPages = Math.ceil(processedData.length / rowsPerPage);\r\n  const startIndex = (currentPage - 1) * rowsPerPage;\r\n  const endIndex = startIndex + rowsPerPage;\r\n  const currentRows = processedData.slice(startIndex, endIndex);\r\n\r\n  // --- Render Functions (Chart fix applied) ---\r\n\r\n  const renderChart = () => (\r\n    // Fixed width/height for stable rendering (no ResponsiveContainer)\r\n    <div style={{ width: '780px', height: '300px', margin: '0 auto' }}> \r\n      <LineChart\r\n        width={780} \r\n        height={300}\r\n        data={processedData}\r\n        margin={{ top: 5, right: 20, left: 10, bottom: 5 }}\r\n      >\r\n        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e0e0e0\" />\r\n        <XAxis dataKey=\"date\" interval=\"preserveStartEnd\" tick={{ fontSize: 12 }} />\r\n        <YAxis label={{ value: `Temperature (°C)`, angle: -90, position: 'insideLeft' }} />\r\n        <Tooltip /> \r\n        <Legend />\r\n        <Line \r\n          type=\"monotone\" \r\n          dataKey=\"tempMax\"\r\n          name=\"Max Temp (2m)\" \r\n          stroke=\"#e64a19\" \r\n          strokeWidth={2}\r\n        />\r\n        <Line \r\n          type=\"monotone\" \r\n          dataKey=\"tempMin\" \r\n          name=\"Min Temp (2m)\" \r\n          stroke=\"#1976d2\" \r\n          strokeWidth={2}\r\n        />\r\n      </LineChart>\r\n    </div>\r\n  );\r\n\r\n  const renderTable = () => (\r\n    // ... (Table code remains the same) ...\r\n    <div className=\"mt-8\">\r\n      <h3 className=\"text-xl font-semibold mb-4\">Raw Data Table</h3>\r\n      \r\n      {/* Pagination Controls */}\r\n      <div className=\"flex justify-between items-center mb-4 text-sm\">\r\n        <div>\r\n          Rows per page:\r\n          <select \r\n            className=\"ml-2 border rounded p-1\"\r\n            value={rowsPerPage} \r\n            onChange={(e) => {\r\n                setRowsPerPage(Number(e.target.value));\r\n                setCurrentPage(1);\r\n            }}\r\n          >\r\n            {[10, 20, 50].map(val => (\r\n                <option key={val} value={val}>{val}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          Page {currentPage} of {totalPages}\r\n          <button \r\n            onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))} \r\n            disabled={currentPage === 1}\r\n            className=\"ml-3 p-1 border rounded text-gray-700 disabled:opacity-50\"\r\n          >\r\n            Previous\r\n          </button>\r\n          <button \r\n            onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))} \r\n            disabled={currentPage === totalPages}\r\n            className=\"ml-2 p-1 border rounded text-gray-700 disabled:opacity-50\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <div className=\"overflow-x-auto border rounded-lg\">\r\n        <table className=\"min-w-full divide-y divide-gray-200\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              {['Date', 'Max Temp (°C)', 'Min Temp (°C)', 'Apparent Max (°C)', 'Apparent Min (°C)'].map(header => (\r\n                <th key={header} className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  {header}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {currentRows.map((row) => (\r\n              <tr key={row.date} className=\"hover:bg-gray-50\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{row.date}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{row.tempMax}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{row.tempMin}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{row.apparentMax}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{row.apparentMin}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n\r\n  // --- MAIN RENDERING LOGIC ---\r\n  \r\n  // 1. If no file is selected, show the prompt (This part is unchanged)\r\n  if (!selectedFile) {\r\n    return (\r\n      <div className=\"p-8 bg-white rounded-lg shadow-xl h-full flex items-center justify-center min-h-[500px]\">\r\n        <p className=\"text-gray-500 text-lg\">\r\n            Select a file from the left panel to view and visualize the weather data.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 2. If a file IS selected, we render the container and conditionally show content\r\n  return (\r\n    <div className=\"p-8 bg-white rounded-lg shadow-xl h-full\">\r\n      <h2 className=\"text-2xl font-bold mb-6 truncate\">\r\n        Visualization: {selectedFile}\r\n      </h2>\r\n\r\n      {/* --- Check for Loading / Error --- */}\r\n\r\n      {loading && (\r\n        <div className=\"p-4 text-center text-blue-600\">\r\n          Loading data... (Fetching from S3 via FastAPI)\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"p-4 bg-red-100 text-red-700 rounded border border-red-300\">\r\n          Error loading data: {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* --- Check for Data Availability --- */}\r\n\r\n      {/* Renders if loading is complete AND data is present */}\r\n      {!loading && processedData.length > 0 && (\r\n        <>\r\n          {/* --- DEBUG PANEL --- */}\r\n          {/* <div className=\"mb-4 p-3 bg-yellow-50 border border-yellow-300 text-xs rounded\">\r\n              <p className=\"font-bold text-yellow-800\">DEBUG: Chart Data Check</p>\r\n              <p>Total Data Points: {processedData.length}</p>\r\n              <p className=\"truncate\">First Data Point: {JSON.stringify(processedData[0])}</p>\r\n          </div> */}\r\n          {/* ------------------- */}\r\n          \r\n          <div className=\"mb-8 overflow-x-auto\"> \r\n            <h3 className=\"text-xl font-semibold mb-4\">Daily Temperature Chart</h3>\r\n            {renderChart()}\r\n          </div>\r\n          \r\n          {renderTable()}\r\n        </>\r\n      )}\r\n\r\n      {/* Renders if loading is complete AND data is NOT present (e.g., empty file) */}\r\n      {!loading && processedData.length === 0 && !error && (\r\n        <div className=\"p-4 text-center text-gray-500\">\r\n          No weather data available for this file.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VisualizationPanel;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 789, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AdityaKhachar/Downloads/Backend-Assessment/weather-explorer-case-study/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useCallback } from 'react';\nimport InputPanel from './components/InputPanel';\nimport FileBrowser from './components/FileBrowser';\nimport VisualizationPanel from './components/VisualizationPanel';\n\n// --- Shared Types ---\nexport interface FileMetadata {\n  name: string;\n  size: number;\n  created_at: string;\n}\n\nexport interface RawWeatherData {\n    latitude: number;\n    longitude: number;\n    timezone: string;\n    daily_units: {\n        time: string;\n        temperature_2m_max: string;\n        temperature_2m_min: string;\n        apparent_temperature_max: string;\n        apparent_temperature_min: string;\n    };\n    daily: {\n        time: string[];\n        temperature_2m_max: number[];\n        temperature_2m_min: number[];\n        apparent_temperature_max: number[];\n        apparent_temperature_min: number[];\n    };\n}\n\n\nexport default function Home() {\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\n  const [weatherData, setWeatherData] = useState<RawWeatherData | null>(null);\n  const [refreshKey, setRefreshKey] = useState<number>(0);\n\n  const handleFileSelect = (fileName: string) => {\n    setSelectedFile(fileName);\n    setWeatherData(null);\n  };\n\n  const handleFileStored = useCallback(() => {\n    setRefreshKey(prevKey => prevKey + 1);\n  }, []);\n\n  return (\n    // Outer Container: Subtle gradient background, reduced padding on mobile (p-4)\n    <div className=\"min-h-screen p-4 lg:p-8 bg-gradient-to-br from-gray-50 to-white\">\n      <div className=\"max-w-7xl mx-auto\">\n          {/* Header: Centered, reduced padding/margins for mobile readability */}\n          <header className=\"text-center py-4 mb-6 lg:py-6 lg:mb-12 border-b border-blue-200\">\n            <h1 className=\"text-3xl font-extrabold text-blue-700 tracking-tight sm:text-4xl lg:text-5xl\">\n              InRisk Weather Explorer Dashboard\n            </h1>\n            {/* <p className=\"text-sm text-gray-500 mt-1 lg:text-lg\">Full-Stack Assessment Solution</p> */}\n          </header>\n\n          {/* Main Layout Grid: Defaults to 1 column on mobile (grid-cols-1), switches to 4 columns on large screens (lg:grid-cols-4) */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-8\">\n            \n            {/* Left Column (Input and Browser) */}\n            {/* Stacks vertically on mobile (space-y-4) */}\n            <div className=\"lg:col-span-1 space-y-4 lg:space-y-8\">\n              \n              <InputPanel onFileStored={handleFileStored} />\n              \n              <FileBrowser \n                key={refreshKey}\n                onFileSelect={handleFileSelect} \n                selectedFile={selectedFile} \n              />\n\n            </div>\n\n            {/* Right Column (Visualization) */}\n            {/* Takes full width on mobile, then 3 columns on large screens */}\n            <div className=\"lg:col-span-3\">\n              <VisualizationPanel \n                selectedFile={selectedFile} \n                weatherData={weatherData}\n                setWeatherData={setWeatherData}\n              />\n            </div>\n\n          </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAkCe,SAAS;;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAwB;IACtE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAS;IAErD,MAAM,mBAAmB,CAAC;QACxB,gBAAgB;QAChB,eAAe;IACjB;IAEA,MAAM,mBAAmB,IAAA,4KAAW;8CAAC;YACnC;sDAAc,CAAA,UAAW,UAAU;;QACrC;6CAAG,EAAE;IAEL,OACE,+EAA+E;kBAC/E,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAO,WAAU;8BAChB,cAAA,6LAAC;wBAAG,WAAU;kCAA+E;;;;;;;;;;;8BAO/F,6LAAC;oBAAI,WAAU;;sCAIb,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC,8IAAU;oCAAC,cAAc;;;;;;8CAE1B,6LAAC,+IAAW;oCAEV,cAAc;oCACd,cAAc;mCAFT;;;;;;;;;;;sCAST,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,sJAAkB;gCACjB,cAAc;gCACd,aAAa;gCACb,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhC;GAzDwB;KAAA"}}]
}